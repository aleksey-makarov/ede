<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Text.EDE</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Text-EDE.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">ed-e-0.1.0: Textual Templating Language</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Portability</th><td>non-portable (GHC extensions)</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Maintainer</th><td>Brendan Hay &lt;brendan.g.hay@gmail.com&gt;</td></tr><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Text.EDE</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">How to use this library
</a></li><li><a href="#g:2">Parsing and Rendering
</a><ul><li><a href="#g:3">Basic
</a></li><li><a href="#g:4">IO and Includes
</a></li><li><a href="#g:5">Configurable
</a></li><li><a href="#g:6">Either Variants
</a></li></ul></li><li><a href="#g:7">Results and Errors
</a></li><li><a href="#g:8">Includes
</a></li><li><a href="#g:9">Filters
</a></li><li><a href="#g:10">Convenience
</a><ul><li><a href="#g:11">Data.Aeson
</a></li></ul></li><li><a href="#g:12">Syntax
</a><ul><li><a href="#g:13">Comments
</a></li><li><a href="#g:14">Raw
</a></li><li><a href="#g:15">Variables
</a></li><li><a href="#g:16">Conditionals
</a></li><li><a href="#g:17">Case Analysis
</a></li><li><a href="#g:18">Loops
</a></li><li><a href="#g:19">Includes
</a></li><li><a href="#g:20">Filters
</a></li></ul></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>A (mostly logicless) textual templating language in the same
 vein as <a href="https://github.com/Shopify/liquid">Liquid</a> or <a href="http://jinja.pocoo.org/docs/">Jinja2</a>.
</p><p>(ED-E is a character from Fallout New Vegas, pronounced i&#720;-di&#720;-i&#720;, or Eddie.)
</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span>  <a href="#t:Template">Template</a> </li><li class="src short"><a href="#v:parse">parse</a> :: Text -&gt; <a href="Text-EDE.html#t:Result">Result</a> <a href="Text-EDE.html#t:Template">Template</a></li><li class="src short"><a href="#v:render">render</a> :: <a href="Text-EDE.html#t:Template">Template</a> -&gt; Object -&gt; <a href="Text-EDE.html#t:Result">Result</a> Text</li><li class="src short"><a href="#v:parseFile">parseFile</a> :: <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a> (<a href="Text-EDE.html#t:Result">Result</a> <a href="Text-EDE.html#t:Template">Template</a>)</li><li class="src short"><a href="#v:parseAs">parseAs</a> :: SourceName -&gt; Text -&gt; <a href="Text-EDE.html#t:Result">Result</a> <a href="Text-EDE.html#t:Template">Template</a></li><li class="src short"><a href="#v:renderWith">renderWith</a> :: HashMap Text <a href="Text-EDE.html#t:Fun">Fun</a> -&gt; HashMap Text <a href="Text-EDE.html#t:Template">Template</a> -&gt; <a href="Text-EDE.html#t:Template">Template</a> -&gt; Object -&gt; <a href="Text-EDE.html#t:Result">Result</a> Text</li><li class="src short"><a href="#v:eitherParse">eitherParse</a> :: Text -&gt; <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Either.html#t:Either">Either</a> <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a> <a href="Text-EDE.html#t:Template">Template</a></li><li class="src short"><a href="#v:eitherParseFile">eitherParseFile</a> :: <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a> (<a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Either.html#t:Either">Either</a> <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a> <a href="Text-EDE.html#t:Template">Template</a>)</li><li class="src short"><a href="#v:eitherParseAs">eitherParseAs</a> :: SourceName -&gt; Text -&gt; <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Either.html#t:Either">Either</a> <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a> <a href="Text-EDE.html#t:Template">Template</a></li><li class="src short"><a href="#v:eitherRender">eitherRender</a> :: <a href="Text-EDE.html#t:Template">Template</a> -&gt; Object -&gt; <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Either.html#t:Either">Either</a> <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a> Text</li><li class="src short"><a href="#v:eitherRenderWith">eitherRenderWith</a> :: HashMap Text <a href="Text-EDE.html#t:Fun">Fun</a> -&gt; HashMap Text <a href="Text-EDE.html#t:Template">Template</a> -&gt; <a href="Text-EDE.html#t:Template">Template</a> -&gt; Object -&gt; <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Either.html#t:Either">Either</a> <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a> Text</li><li class="src short"><span class="keyword">data</span>  <a href="#t:Meta">Meta</a>  = <a href="#v:Meta">Meta</a> {<ul class="subs"><li><a href="#v:metaSource">metaSource</a> :: !<a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a></li><li><a href="#v:metaRow">metaRow</a> :: !<a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Int.html#t:Int">Int</a></li><li><a href="#v:metaColumn">metaColumn</a> :: !<a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Int.html#t:Int">Int</a></li></ul>}</li><li class="src short"><span class="keyword">data</span>  <a href="#t:Result">Result</a> a<ul class="subs"><li>= <a href="#v:Error">Error</a> !<a href="Text-EDE.html#t:Meta">Meta</a> [<a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a>]  </li><li>| <a href="#v:Success">Success</a> a  </li></ul></li><li class="src short"><a href="#v:eitherResult">eitherResult</a> ::  <a href="Text-EDE.html#t:Result">Result</a> a -&gt; <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Either.html#t:Either">Either</a> <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a> a</li><li class="src short"><a href="#v:result">result</a> ::  (<a href="Text-EDE.html#t:Meta">Meta</a> -&gt; [<a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a>] -&gt; b) -&gt; (a -&gt; b) -&gt; <a href="Text-EDE.html#t:Result">Result</a> a -&gt; b</li><li class="src short"><span class="keyword">data</span>  <a href="#t:Fun">Fun</a>  <span class="keyword">where</span><ul class="subs"><li><a href="#v:Fun">Fun</a> :: (<a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Eq.html#t:Eq">Eq</a> a, <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Eq.html#t:Eq">Eq</a> b) =&gt; <a href="Text-EDE.html#t:TType">TType</a> a -&gt; <a href="Text-EDE.html#t:TType">TType</a> b -&gt; (a -&gt; b) -&gt; <a href="Text-EDE.html#t:Fun">Fun</a>  </li></ul></li><li class="src short"><span class="keyword">data</span>  <a href="#t:TType">TType</a> a <span class="keyword">where</span><ul class="subs"><li><a href="#v:TNil">TNil</a> ::  <a href="Text-EDE.html#t:TType">TType</a> ()  </li><li><a href="#v:TText">TText</a> ::  <a href="Text-EDE.html#t:TType">TType</a> Text  </li><li><a href="#v:TBool">TBool</a> ::  <a href="Text-EDE.html#t:TType">TType</a> <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Bool.html#t:Bool">Bool</a>  </li><li><a href="#v:TInt">TInt</a> ::  <a href="Text-EDE.html#t:TType">TType</a> <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Prelude.html#t:Integer">Integer</a>  </li><li><a href="#v:TDbl">TDbl</a> ::  <a href="Text-EDE.html#t:TType">TType</a> <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Prelude.html#t:Double">Double</a>  </li><li><a href="#v:TBld">TBld</a> ::  <a href="Text-EDE.html#t:TType">TType</a> Builder  </li><li><a href="#v:TMap">TMap</a> ::  <a href="Text-EDE.html#t:TType">TType</a> Object  </li><li><a href="#v:TList">TList</a> ::  <a href="Text-EDE.html#t:TType">TType</a> Array  </li><li><a href="#v:TFun">TFun</a> ::  <a href="Text-EDE.html#t:TType">TType</a> <a href="Text-EDE.html#t:Fun">Fun</a>  </li></ul></li><li class="src short"><a href="#v:defaultFilters">defaultFilters</a> :: HashMap Text <a href="Text-EDE.html#t:Fun">Fun</a></li><li class="src short"><a href="#v:fromPairs">fromPairs</a> :: [Pair] -&gt; Object</li><li class="src short"><a href="#v:.-61-">(.=)</a> :: ToJSON a =&gt; Text -&gt; a -&gt; Pair</li></ul></div><div id="interface"><h1 id="g:1">How to use this library
</h1><div class="doc"><p>A simple example of parsing and rendering <code>Text</code> containing a basic conditional
 expression and variable interpolation follows.
</p><p>First the <code><a href="Text-EDE.html#t:Template">Template</a></code> is defined:
</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>let tmpl = parse &quot;{% if var %}Hello, {{ var }}!{% else %}negative!{% endif %}&quot; :: Result Template
</code></strong></pre><p>Then an <code>Object</code> is defined containing the environment which will be
 available to the <code><a href="Text-EDE.html#t:Template">Template</a></code> during rendering:
</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>let env = render $ fromPairs [ &quot;var&quot; .= &quot;World&quot; ] :: Template -&gt; Result Text
</code></strong></pre><p>Finally the environment is applied to the <code><a href="Text-EDE.html#t:Template">Template</a></code>:
</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>tmpl &gt;&gt;= env :: Result Text
</code></strong>&gt; Success &quot;Hello, World!&quot;
</pre><p>In this manner, <code><a href="Text-EDE.html#t:Template">Template</a></code>s can be pre-compiled to the internal AST and
 the cost of parsing can be amortised if the same <code><a href="Text-EDE.html#t:Template">Template</a></code> is rendered multiple times.
</p><p>Another example, this time rendering a <code><a href="Text-EDE.html#t:Template">Template</a></code> from a file:
</p><pre> import qualified Data.Text.Lazy as LText
 import           Text.EDE

 main :: IO ()
 main = do
     tmpl &lt;- LText.readFile &quot;template.ede&quot;
     either error print $ eitherParse tmpl &gt;&gt;= eitherRender env
   where
     env = fromPairs
         [ &quot;text&quot; .= &quot;Some Text.&quot;
         , &quot;int&quot;  .= 1
         , &quot;list&quot; .= [5..10]
         ]
</pre><p>Please see the <a href="#syntax">syntax</a> section for more information about available
 statements and expressions.
</p></div><h1 id="g:2">Parsing and Rendering
</h1><div class="doc"><p>Parsing and rendering require two separate steps intentionally so that the
 more expensive result of parsing can be embedded, and/or reused.
</p><ul><li> Parsing tokenises the input and converts it to an internal AST representation,
 which can be cached for future use.
</li><li> Rendering takes an <code>Object</code> as the environment and a parsed <code><a href="Text-EDE.html#t:Template">Template</a></code>
 to subsitute the values into.
</li></ul></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:Template" class="def">Template</a>  </p><div class="doc"><p>A valid parsed and compiled template.
</p></div><div class="subs instances"><p id="control.i:Template" class="caption collapser" onclick="toggleSection('i:Template')">Instances</p><div id="section.i:Template" class="show"><table><tr><td class="src"><a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Eq.html#t:Eq">Eq</a> <a href="Text-EDE.html#t:Template">Template</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><h2 id="g:3">Basic
</h2><div class="top"><p class="src"><a name="v:parse" class="def">parse</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Text</td><td class="doc"><p>Lazy <code><a href="Data-Text-Lazy.html#t:Text">Text</a></code> template definition.
</p></td></tr><tr><td class="src">-&gt; <a href="Text-EDE.html#t:Result">Result</a> <a href="Text-EDE.html#t:Template">Template</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Parse <code>Text</code> into a compiled template.
</p><p>This function is pure and does not resolve include expressions. This requires
 that the caller supplies a <code>HashMap</code> of <code><a href="Text-EDE.html#t:Template">Template</a></code>s at render time
 using <code><a href="Text-EDE.html#v:renderWith">renderWith</a></code>.
</p></div></div><div class="top"><p class="src"><a name="v:render" class="def">render</a> :: <a href="Text-EDE.html#t:Template">Template</a> -&gt; Object -&gt; <a href="Text-EDE.html#t:Result">Result</a> Text</p><div class="doc"><p>Render an <code>Object</code> using the supplied <code><a href="Text-EDE.html#t:Template">Template</a></code>.
</p><p>Rendering a <code><a href="Text-EDE.html#t:Template">Template</a></code> which has been been parsed used the pure variants of
 <code><a href="Text-EDE.html#v:parse">parse</a></code>, and contains
</p></div></div><h2 id="g:4">IO and Includes
</h2><div class="top"><p class="src"><a name="v:parseFile" class="def">parseFile</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Bool.html#t:Bool">Bool</a></td><td class="doc"><p>Error if target <code>include</code> tag is a non-existent file.
</p></td></tr><tr><td class="src">-&gt; <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:FilePath">FilePath</a></td><td class="doc"><p>Path to the template to load.
</p></td></tr><tr><td class="src">-&gt; <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a> (<a href="Text-EDE.html#t:Result">Result</a> <a href="Text-EDE.html#t:Template">Template</a>)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Read and parse a file into a compiled template.
</p><p>If <code><a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Bool.html#v:True">True</a></code> is specified as the first parameter, <code><a href="Text-EDE.html#v:parseFile">parseFile</a></code> performs
 all template resolution and parsing recursively, with non-existent templates
 and parse errors returning an error immediately.
</p><p>If you wish to defer loading of includes, or supply additional precompiled/named
 includes at runtime (using <code><a href="Text-EDE.html#v:renderWith">renderWith</a></code> rather than exclusively using file paths)
 you should specify <code><a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Bool.html#v:False">False</a></code> as the first parameter,
 or use <code><a href="Text-EDE.html#v:parse">parse</a></code> and <code><a href="Text-EDE.html#v:renderWith">renderWith</a></code> directly.
</p></div></div><h2 id="g:5">Configurable
</h2><div class="top"><p class="src"><a name="v:parseAs" class="def">parseAs</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: SourceName</td><td class="doc"><p>Descriptive name for error messages.
</p></td></tr><tr><td class="src">-&gt; Text</td><td class="doc"><p>Lazy <code><a href="Data-Text-Lazy.html#t:Text">Text</a></code> template definition.
</p></td></tr><tr><td class="src">-&gt; <a href="Text-EDE.html#t:Result">Result</a> <a href="Text-EDE.html#t:Template">Template</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Parse <code>Text</code> into a compiled template.
</p></div></div><div class="top"><p class="src"><a name="v:renderWith" class="def">renderWith</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: HashMap Text <a href="Text-EDE.html#t:Fun">Fun</a></td><td class="doc"><p>Filters
</p></td></tr><tr><td class="src">-&gt; HashMap Text <a href="Text-EDE.html#t:Template">Template</a></td><td class="doc"><p>Additional Templates
</p></td></tr><tr><td class="src">-&gt; <a href="Text-EDE.html#t:Template">Template</a></td><td class="doc"><p>Parsed Template
</p></td></tr><tr><td class="src">-&gt; Object</td><td class="doc"><p>Environment
</p></td></tr><tr><td class="src">-&gt; <a href="Text-EDE.html#t:Result">Result</a> Text</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Render an <code>Object</code> using the supplied <code><a href="Text-EDE.html#t:Template">Template</a></code>.
</p></div></div><h2 id="g:6">Either Variants
</h2><div class="top"><p class="src"><a name="v:eitherParse" class="def">eitherParse</a> :: Text -&gt; <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Either.html#t:Either">Either</a> <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a> <a href="Text-EDE.html#t:Template">Template</a></p><div class="doc"><p>See: <code><a href="Text-EDE.html#v:parse">parse</a></code>
</p></div></div><div class="top"><p class="src"><a name="v:eitherParseFile" class="def">eitherParseFile</a> :: <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/System-IO.html#t:IO">IO</a> (<a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Either.html#t:Either">Either</a> <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a> <a href="Text-EDE.html#t:Template">Template</a>)</p><div class="doc"><p>See: <code><a href="Text-EDE.html#v:parseFile">parseFile</a></code>
</p></div></div><div class="top"><p class="src"><a name="v:eitherParseAs" class="def">eitherParseAs</a> :: SourceName -&gt; Text -&gt; <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Either.html#t:Either">Either</a> <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a> <a href="Text-EDE.html#t:Template">Template</a></p><div class="doc"><p>See: <code><a href="Text-EDE.html#v:parseAs">parseAs</a></code>
</p></div></div><div class="top"><p class="src"><a name="v:eitherRender" class="def">eitherRender</a> :: <a href="Text-EDE.html#t:Template">Template</a> -&gt; Object -&gt; <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Either.html#t:Either">Either</a> <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a> Text</p><div class="doc"><p>See: <code><a href="Text-EDE.html#v:render">render</a></code>
</p></div></div><div class="top"><p class="src"><a name="v:eitherRenderWith" class="def">eitherRenderWith</a> :: HashMap Text <a href="Text-EDE.html#t:Fun">Fun</a> -&gt; HashMap Text <a href="Text-EDE.html#t:Template">Template</a> -&gt; <a href="Text-EDE.html#t:Template">Template</a> -&gt; Object -&gt; <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Either.html#t:Either">Either</a> <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a> Text</p><div class="doc"><p>See: <code><a href="Text-EDE.html#v:renderWith">renderWith</a></code>
</p></div></div><h1 id="g:7">Results and Errors
</h1><div class="doc"><p>Unsuccessful <code><a href="Text-EDE.html#v:parse">parse</a></code> or <code><a href="Text-EDE.html#v:render">render</a></code> steps can be inspected or analysed using
 <code><a href="Text-EDE.html#v:result">result</a></code>.
</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>result failure success $ parse tmpl &gt;&gt;= render env
</code></strong></pre><p>If you're only interested in dealing with errors as strings, and the positional
 information contained in <code><a href="Text-EDE.html#t:Meta">Meta</a></code> is not of use you can use the convenience functions
 <code><a href="Text-EDE.html#v:eitherParse">eitherParse</a></code>, <code><a href="Text-EDE.html#v:eitherRender">eitherRender</a></code>, or convert a <code><a href="Text-EDE.html#t:Result">Result</a></code> to <code><a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Either.html#t:Either">Either</a></code> using <code><a href="Text-EDE.html#v:eitherResult">eitherResult</a></code>.
</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>either failure success $ eitherParse tmpl &gt;&gt;= eitherRender env
</code></strong></pre></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:Meta" class="def">Meta</a>  </p><div class="doc"><p>Meta information describing the source position of an expression or error.
</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Meta" class="def">Meta</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:metaSource" class="def">metaSource</a> :: !<a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:metaRow" class="def">metaRow</a> :: !<a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Int.html#t:Int">Int</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:metaColumn" class="def">metaColumn</a> :: !<a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Int.html#t:Int">Int</a></dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:Meta" class="caption collapser" onclick="toggleSection('i:Meta')">Instances</p><div id="section.i:Meta" class="show"><table><tr><td class="src"><a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Eq.html#t:Eq">Eq</a> <a href="Text-EDE.html#t:Meta">Meta</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Ord.html#t:Ord">Ord</a> <a href="Text-EDE.html#t:Meta">Meta</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Text-Show.html#t:Show">Show</a> <a href="Text-EDE.html#t:Meta">Meta</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:Result" class="def">Result</a> a </p><div class="doc"><p>The result of running parsing or rendering steps.
</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Error" class="def">Error</a> !<a href="Text-EDE.html#t:Meta">Meta</a> [<a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a>]</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:Success" class="def">Success</a> a</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:Result" class="caption collapser" onclick="toggleSection('i:Result')">Instances</p><div id="section.i:Result" class="show"><table><tr><td class="src"><a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> <a href="Text-EDE.html#t:Result">Result</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Functor">Functor</a> <a href="Text-EDE.html#t:Result">Result</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:MonadPlus">MonadPlus</a> <a href="Text-EDE.html#t:Result">Result</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Applicative.html#t:Applicative">Applicative</a> <a href="Text-EDE.html#t:Result">Result</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Eq.html#t:Eq">Eq</a> a =&gt; <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Eq.html#t:Eq">Eq</a> (<a href="Text-EDE.html#t:Result">Result</a> a)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Ord.html#t:Ord">Ord</a> a =&gt; <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Ord.html#t:Ord">Ord</a> (<a href="Text-EDE.html#t:Result">Result</a> a)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Text-Show.html#t:Show">Show</a> a =&gt; <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Text-Show.html#t:Show">Show</a> (<a href="Text-EDE.html#t:Result">Result</a> a)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Monoid.html#t:Monoid">Monoid</a> a =&gt; <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Monoid.html#t:Monoid">Monoid</a> (<a href="Text-EDE.html#t:Result">Result</a> a)</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:eitherResult" class="def">eitherResult</a> ::  <a href="Text-EDE.html#t:Result">Result</a> a -&gt; <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Either.html#t:Either">Either</a> <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a> a</p><div class="doc"><p>Convert a <code><a href="Text-EDE.html#t:Result">Result</a></code> to an <code><a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Either.html#t:Either">Either</a></code> with the <code><a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Either.html#v:Left">Left</a></code> case holding a formatted
 error message, and <code><a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Either.html#v:Right">Right</a></code> being the successful result over which <code><a href="Text-EDE.html#t:Result">Result</a></code> is paramterised.
</p></div></div><div class="top"><p class="src"><a name="v:result" class="def">result</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (<a href="Text-EDE.html#t:Meta">Meta</a> -&gt; [<a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a>] -&gt; b)</td><td class="doc"><p>Function to apply to the <code><a href="Text-EDE.html#v:Error">Error</a></code> parameters.
</p></td></tr><tr><td class="src">-&gt; (a -&gt; b)</td><td class="doc"><p>Function to apply to the <code><a href="Text-EDE.html#v:Success">Success</a></code> case.
</p></td></tr><tr><td class="src">-&gt; <a href="Text-EDE.html#t:Result">Result</a> a</td><td class="doc"><p>The <code><a href="Text-EDE.html#t:Result">Result</a></code> to map over.
</p></td></tr><tr><td class="src">-&gt; b</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Perform a case analysis on a <code><a href="Text-EDE.html#t:Result">Result</a></code>.
</p></div></div><h1 id="g:8">Includes
</h1><h1 id="g:9">Filters
</h1><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:Fun" class="def">Fun</a>  <span class="keyword">where</span></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Fun" class="def">Fun</a> :: (<a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Eq.html#t:Eq">Eq</a> a, <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Eq.html#t:Eq">Eq</a> b) =&gt; <a href="Text-EDE.html#t:TType">TType</a> a -&gt; <a href="Text-EDE.html#t:TType">TType</a> b -&gt; (a -&gt; b) -&gt; <a href="Text-EDE.html#t:Fun">Fun</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:Fun" class="caption collapser" onclick="toggleSection('i:Fun')">Instances</p><div id="section.i:Fun" class="show"><table><tr><td class="src"><a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Eq.html#t:Eq">Eq</a> <a href="Text-EDE.html#t:Fun">Fun</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:TType" class="def">TType</a> a <span class="keyword">where</span></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:TNil" class="def">TNil</a> ::  <a href="Text-EDE.html#t:TType">TType</a> ()</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:TText" class="def">TText</a> ::  <a href="Text-EDE.html#t:TType">TType</a> Text</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:TBool" class="def">TBool</a> ::  <a href="Text-EDE.html#t:TType">TType</a> <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Bool.html#t:Bool">Bool</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:TInt" class="def">TInt</a> ::  <a href="Text-EDE.html#t:TType">TType</a> <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Prelude.html#t:Integer">Integer</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:TDbl" class="def">TDbl</a> ::  <a href="Text-EDE.html#t:TType">TType</a> <a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Prelude.html#t:Double">Double</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:TBld" class="def">TBld</a> ::  <a href="Text-EDE.html#t:TType">TType</a> Builder</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:TMap" class="def">TMap</a> ::  <a href="Text-EDE.html#t:TType">TType</a> Object</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:TList" class="def">TList</a> ::  <a href="Text-EDE.html#t:TType">TType</a> Array</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:TFun" class="def">TFun</a> ::  <a href="Text-EDE.html#t:TType">TType</a> <a href="Text-EDE.html#t:Fun">Fun</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:TType" class="caption collapser" onclick="toggleSection('i:TType')">Instances</p><div id="section.i:TType" class="show"><table><tr><td class="src"><a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Text-Show.html#t:Show">Show</a> (<a href="Text-EDE.html#t:TType">TType</a> a)</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:defaultFilters" class="def">defaultFilters</a> :: HashMap Text <a href="Text-EDE.html#t:Fun">Fun</a></p></div><h1 id="g:10">Convenience
</h1><h2 id="g:11">Data.Aeson
</h2><div class="doc"><p><code><a href="Text-EDE.html#v:fromPairs">fromPairs</a></code> is a wrapper around Aeson's <code>object</code> function which safely strips the outer
 <code>Value</code> constructor, providing the correct type signature for input into <code><a href="Text-EDE.html#v:render">render</a></code>.
</p><p>It is used in combination with the re-exported <code><a href="Text-EDE.html#v:.-61-">.=</a></code> as follows:
</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>render (fromPairs [ &quot;foo&quot; .= &quot;value&quot;, &quot;bar&quot; .= 1 ]) :: Template -&gt; Result Text
</code></strong></pre></div><div class="top"><p class="src"><a name="v:fromPairs" class="def">fromPairs</a> :: [Pair] -&gt; Object</p><div class="doc"><p>Create an <code>Object</code> from a list of name/value <code>Pair</code>s.
 See <code>Aeson'</code>s documentation for more details.
</p></div></div><div class="top"><p class="src"><a name="v:.-61-" class="def">(.=)</a> :: ToJSON a =&gt; Text -&gt; a -&gt; Pair</p></div><h1 id="g:12">Syntax
</h1><h2 id="g:13">Comments
</h2><div class="doc"><p><a name="syntax"></a>
</p><p>Comments are ignored by the parser and omitted from the rendered output.
</p><pre> {# singleline comment #}
</pre><pre> {#
    multiline
    comment
 #}
</pre></div><h2 id="g:14">Raw
</h2><div class="doc"><p>You can disable template processing for blocks of text using the <code>raw</code> section:
</p><pre> {% raw %}
 Some {{{ handlebars }}} or {{ mustache }} or {{ jinja2 }} output tags etc.
 {% endraw %}
</pre><p>This can be used to avoid parsing expressions which would otherwise be considered
 valid <code>ED-E</code> syntax.
</p></div><h2 id="g:15">Variables
</h2><div class="doc"><p>Variables are substituted directly for their <code>Buildable</code> representation.
 An error is raised if the varaible being substituted is not a literal type
 (ie. an <code>Array</code> or <code>Object</code>) or doesn't exist in the supplied environment.
</p><pre> {{ var }}
</pre><p>Nested variable access is also supported for variables which resolve to an <code>Object</code>.
 Dot delimiters are used to chain access through multiple nested <code>Object</code>s.
 The right-most accessor must resolve to a <code>Buildable</code> type as with the previous
 non-nested variable access.
</p><pre> {{ nested.var.access }}
</pre></div><h2 id="g:16">Conditionals
</h2><div class="doc"><p>A conditional is introduced and completed with the section syntax:
</p><pre> {% if var %}
    ... consequent expressions
 {% else %}
    ... alternate expressions
 {% endif %}
</pre><p>The value of <code>{{ var }}</code> determines the branch that is rendered by the template with
 the else branch being optional.
</p><p>In the case of a literal it conforms directly to the supported boolean or relation logical
 operators from Haskell.
 If a variable is singuarly used its existence determines the result of the predicate,
 the exception to this rule is boolean values which will be substituted into the
 expression if they exist in the supplied environment.
</p><p>The following logical expressions are supported as predicates in conditional statements
 with parameters being type checked and an error is raised if the left and right
 hand sides are not type equivalent.
</p><ul><li> <code>And</code>: <code><a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Bool.html#v:-38--38-">&amp;&amp;</a></code>
</li><li> <code>Or</code>: <code><a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Bool.html#v:-124--124-">||</a></code>
</li><li> <code>Equal</code>: <code><a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Eq.html#v:-61--61-">==</a></code>
</li><li> <code>Not Equal</code>: <code><a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Eq.html#v:-47--61-">/=</a></code>
</li><li> <code>Greater</code>: <code><a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Ord.html#v:-62-">&gt;</a></code>
</li><li> <code>Greater Or Equal</code>: <code><a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Ord.html#v:-62--61-">&gt;=</a></code>
</li><li> <code>Less</code>: <code><a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Ord.html#v:-60-">&lt;</a></code>
</li><li> <code>Less Or Equal</code>: <code><a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Ord.html#v:-60--61-">&lt;=</a></code>
</li><li> <code>Negation</code>: <code>!</code>
</li></ul></div><h2 id="g:17">Case Analysis
</h2><div class="doc"><p>To pattern match a literal or variable, you can use the <code>case</code> statement:
</p><pre> {% case var %}
 {% when &quot;a&quot; %}
    .. matched expressions
 {% when &quot;b&quot; %}
    .. matched expressions
 {% else %}
    .. alternate expressions
 {% endcase %}
</pre></div><h2 id="g:18">Loops
</h2><div class="doc"><p>Iterating over an <code>Array</code> or <code>Object</code> can be acheived using the 'for ... in' section syntax.
 Attempting to iterate over any other type will raise an error.
</p><p>Example:
</p><pre> {% for var in list %}
     ... iteration expression
 {% else %}
     ... alternate expression
 {% endfor %}
</pre><p>The iteration branch is rendering per item with the else branch being (which is optional)
 being rendered if the <code>{{ list }}</code> variable is empty.
</p><p>When iterating over an <code>Object</code>, a stable sort using key equivalence is applied, <code>Array</code>s
 are unmodified.
</p><p>The resulting binding within the iteration expression (in this case, <code>{{ var }}</code>) is
 an <code>Object</code> containing the following keys:
</p><ul><li> <code>key        :: Text</code>: They key if the loop target is an <code>Object</code>
</li><li> <code>value      :: a</code>: The value of the loop target
</li><li> <code>loop       :: Object</code>: Loop metadata.
</li><li> <code>length     :: Int</code>: Length of the loop
</li><li> <code>index      :: Int</code>: Index of the iteration
</li><li> <code>index0     :: Int</code>: Zero based index of the iteration
</li><li> <code>remainder  :: Int</code>: Remaining number of iterations
</li><li> <code>remainder0 :: Int</code>: Zero based remaining number of iterations
</li><li> <code>first      :: Bool</code>: Is this the first iteration?
</li><li> <code>last       :: Bool</code>: Is this the last iteration?
</li><li> <code>odd        :: Bool</code>: Is this an odd iteration?
</li><li> <code>even       :: Bool</code>: Is this an even iteration?
</li></ul><p>For example:
</p><pre> {% for item in items %}
     {{ item.index }}:{{ item.value }}
     {% if !item.last %}

     {% endif %}
 {% endfor %}
</pre><p>Will render each item with its (1-based) loop index as a prefix, separated
 by a blank newline, without a trailing at the end of the document.
</p></div><h2 id="g:19">Includes
</h2><div class="doc"><p>TODO
</p></div><h2 id="g:20">Filters
</h2><div class="doc"><p>Filters are typed functions which can be applied to variables and literals.
 An example of rendering a lower cased boolean would be:
</p><pre> {{ True | show | lower }}
</pre><p>The input is on the LHS and chained filters (delimited by '|') are on the RHS,
 with filters being applied left associatively.
</p><p>Available filters:
</p><ul><li> <code>show :: a -&gt; Text</code>: Convert a value to <code>Text</code> using its <code><a href="file:///usr/local/share/doc/ghc/html/libraries/base-4.6.0.1/Text-Show.html#t:Show">Show</a></code> instance.
</li><li> <code>lower :: Text -&gt; Text</code>: Lower case a textual value.
</li><li> <code>upper :: Text -&gt; Text</code>: Upper case a textual value.
</li></ul></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.13.2.1</p></div></body></html>